<script setup>
import { FwbPagination } from 'flowbite-vue'
import { ref, watch } from 'vue'

const props = defineProps({
  totalItems: {
    type: Number,
    default: 0
    // required: true
  },
  perPage: {
    type: Number,
    default: 6
    // required: true
  }
})

const currentPage = ref(1)
const perPage = ref(props.perPage)
const totalPages = ref(0)
const emit = defineEmits(['change-page'])

const prevPage = () => {
  if (currentPage.value > 1) {
    currentPage.value -= 1
  }
}

const nextPage = () => {
  if (currentPage.value < totalPages.value) {
    currentPage.value += 1
  }
}

watch(currentPage, (val) => {
  emit('change-page', val)
})

watch(
  () => props.totalItems,
  (val) => {
    totalPages.value = Math.ceil(val / perPage.value)
  }
)
</script>
<template>
  <fwb-pagination
    v-model="currentPage"
    :total-items="totalItems"
    :per-page="perPage"
    :show-labels="false"
  >
    <template #prev-button>
      <button
        @click="prevPage"
        :disabled="currentPage == 1"
        class="btn-pagination disabled:bg-lightGray dark:disabled:bg-coal-500"
      >
        <svg
          width="14"
          height="12"
          viewBox="0 0 14 12"
          class="fill-coal-900 dark:fill-white"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M13.0977 6.00373C13.0977 5.70581 12.8754 5.45959 12.5869 5.42063L12.5067 5.41526L2.11935 5.41573L5.87201 1.69378C6.10327 1.46446 6.10408 1.09186 5.87381 0.861546C5.66447 0.652174 5.33624 0.632477 5.10454 0.802917L5.03814 0.859754L0.271473 5.58641C0.240989 5.61664 0.214511 5.64935 0.192039 5.6839C0.185692 5.6943 0.179231 5.70494 0.173106 5.71579C0.167472 5.72509 0.162381 5.73475 0.157578 5.74452C0.150907 5.75873 0.14439 5.77341 0.138472 5.78839C0.133664 5.79993 0.129649 5.81117 0.125987 5.82249C0.121633 5.83653 0.117404 5.85149 0.113765 5.86668C0.111061 5.87729 0.108918 5.88749 0.10705 5.89774C0.104422 5.91299 0.102184 5.92876 0.100589 5.94473C0.0992106 5.95691 0.0983815 5.96897 0.097923 5.98105C0.0978045 5.98837 0.097656 5.99603 0.097656 6.00373L0.0979517 6.02653C0.0984046 6.03808 0.0991968 6.04962 0.100329 6.06113L0.097656 6.00373C0.097656 6.04087 0.10111 6.0772 0.107715 6.11243C0.109247 6.12084 0.111072 6.12948 0.113093 6.13808C0.117291 6.1558 0.122142 6.17286 0.127727 6.18958C0.130469 6.19789 0.133663 6.20677 0.137076 6.21558C0.143981 6.23329 0.151487 6.25017 0.159744 6.26661C0.16358 6.27434 0.167876 6.28244 0.172375 6.29045C0.179759 6.30352 0.187366 6.31594 0.195411 6.32805C0.201086 6.33661 0.20737 6.34553 0.213933 6.35431L0.219047 6.36109C0.234967 6.38181 0.252238 6.40144 0.270729 6.41985L5.0381 11.1478C5.26935 11.3772 5.64349 11.3764 5.87377 11.1461C6.08313 10.9368 6.10152 10.6098 5.9294 10.3798L5.87204 10.3139L2.12093 6.59268L12.5067 6.59221C12.8331 6.59221 13.0977 6.32874 13.0977 6.00373Z"
          />
        </svg>
      </button>
    </template>
    <template #next-button>
      <button
        @click="nextPage"
        :disabled="currentPage == totalPages"
        class="btn-pagination disabled:bg-lightGray dark:disabled:bg-coal-500"
      >
        <svg
          width="14"
          height="12"
          viewBox="0 0 14 12"
          class="fill-coal-900 dark:fill-white"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M0.375 6.0031C0.375 6.30103 0.597303 6.54724 0.885726 6.58621L0.965909 6.59158L11.3533 6.59111L7.60065 10.3131C7.36939 10.5424 7.36858 10.915 7.59885 11.1453C7.80818 11.3547 8.13642 11.3744 8.36812 11.2039L8.43452 11.1471L13.2012 6.42043C13.2317 6.3902 13.2581 6.35749 13.2806 6.32294C13.287 6.31254 13.2934 6.3019 13.2995 6.29105C13.3052 6.28175 13.3103 6.27209 13.3151 6.26232C13.3217 6.24811 13.3283 6.23343 13.3342 6.21845C13.339 6.2069 13.343 6.19567 13.3467 6.18435C13.351 6.17031 13.3553 6.15535 13.3589 6.14016C13.3616 6.12955 13.3637 6.11934 13.3656 6.1091C13.3682 6.09385 13.3705 6.07807 13.3721 6.06211C13.3734 6.04993 13.3743 6.03787 13.3747 6.02579C13.3749 6.01847 13.375 6.0108 13.375 6.0031L13.3747 5.98031C13.3743 5.96876 13.3735 5.95722 13.3723 5.94571L13.375 6.0031C13.375 5.96597 13.3715 5.92964 13.3649 5.89441C13.3634 5.88599 13.3616 5.87736 13.3596 5.86876C13.3554 5.85104 13.3505 5.83398 13.3449 5.81726C13.3422 5.80895 13.339 5.80007 13.3356 5.79126C13.3287 5.77355 13.3212 5.75667 13.3129 5.74023C13.3091 5.7325 13.3048 5.7244 13.3003 5.71639C13.2929 5.70332 13.2853 5.6909 13.2772 5.67879C13.2716 5.67022 13.2653 5.6613 13.2587 5.65253L13.2536 5.64574C13.2377 5.62503 13.2204 5.6054 13.2019 5.58699L13.2012 5.58644L8.43455 0.859001C8.20331 0.629662 7.82917 0.630434 7.59888 0.860724C7.38953 1.07008 7.37114 1.39705 7.54326 1.62707L7.60061 1.69296L11.3517 5.41415L0.965909 5.41463C0.639559 5.41463 0.375 5.6781 0.375 6.0031Z"
          />
        </svg>
      </button>
    </template>
    <template v-slot:page-button="{ page, setPage }">
      <button
        @click="setPage(page)"
        class="btn-pagination"
        :class="currentPage == page ? 'bg-primary text-white' : ''"
      >
        {{ page }}
      </button>
    </template>
  </fwb-pagination>
</template>
